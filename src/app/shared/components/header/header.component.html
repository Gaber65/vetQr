<!-- header.component.html -->
<header *ngIf="isAuthenticated">
  <nav>
    <!-- Mobile menu toggle button -->
    <button class="mobile-menu-toggle" (click)="toggleMenu()" aria-label="Toggle menu">
      <mat-icon>menu</mat-icon>
    </button>

    <div class="user-actions">
      <!-- Language Switcher -->
      <div class="lang-switcher">
        <button
          [class.active]="currentLang === 'en'"
          (click)="switchLanguage('en')"
          matTooltip="{{ 'HEADER.ENGLISH' | translate }}"
        >
          EN
        </button>
        <span>|</span>
        <button
          [class.active]="currentLang === 'ar'"
          (click)="switchLanguage('ar')"
          matTooltip="{{ 'HEADER.ARABIC' | translate }}"
        >
          AR
        </button>
      </div>

      <!-- User Profile with Dropdown -->
      <div class="profile-dropdown">
        <button class="profile-trigger" (click)="toggleDropdown()">
          <div class="avatar">
            {{ userInitials }}
          </div>
          <div class="info">
            <span class="name">{{ userName | translate }}</span>
            <span class="role">{{ "HEADER.ROLE_" + userRole.toUpperCase().replace(' ', '_') | translate }}</span>
          </div>
          <mat-icon class="dropdown-icon" [class.open]="isDropdownOpen">
            {{ isDropdownOpen ? 'expand_less' : 'expand_more' }}
          </mat-icon>
        </button>

        <!-- Dropdown Menu -->
        <div class="dropdown-menu" [class.open]="isDropdownOpen" (click)="$event.stopPropagation()">
          <div class="dropdown-header">
            <div class="avatar-large">
              {{ userInitials }}
            </div>
            <div class="user-details">
              <h4>{{ userName }}</h4>
              <p class="role-text">{{ "HEADER.ROLE_" + userRole.toUpperCase().replace(' ', '_') | translate }}</p>
            </div>
          </div>
          
          <div class="dropdown-divider"></div>
          
          <div class="dropdown-items">
            <button class="dropdown-item" (click)="navigateToProfile()">
              <mat-icon>person</mat-icon>
              <span>{{ "HEADER.PROFILE" | translate }}</span>
            </button>
            
            <button class="dropdown-item" (click)="navigateToSettings()">
              <mat-icon>settings</mat-icon>
              <span>{{ "HEADER.SETTINGS" | translate }}</span>
            </button>
            
            <div class="dropdown-divider"></div>
            
            <button class="dropdown-item logout-item" (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>{{ "HEADER.LOGOUT" | translate }}</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Backdrop for dropdown -->
  <div class="dropdown-backdrop" 
       *ngIf="isDropdownOpen" 
       (click)="closeDropdown()">
  </div>
</header>